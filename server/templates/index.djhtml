<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="/static/images/favicon.png" />

    <title>Cornerwise</title>

    <script type="text/javascript">
     function _placesInit() {
         if (window._onPlacesReady) onPlacesReady();
     }

     var ResponseMessages = [];
     {% for message in messages %}
     ResponseMessages.push(
         {% templatetag openbrace %}
         "message": "{{ message.message|escapejs }}",
         "level": "{{ message.level_tag }}",
         "tags": "{{ message.tags }}"
         {% templatetag closebrace %}
     );
     {% endfor %}
    </script>
    <script data-main="/static/scripts/main" src="/static/scripts/require.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ google_key }}&libraries=places" async defer></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <link rel="stylesheet" href="/static/css/app.css" type="text/css" media="screen" />

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Find and explore current and future zoning projects near you - City of Somerville."/>
    <meta name="keywords" content="civic engagement,code for america,code for boston, permit, zoning,development,planning,planning boardmurban planning,zoning,zoning board" />
    <!-- OpenGraph -->
    <meta name="og:type" content="website" />
    <meta name="og:image" content="/static/images/cornerwise-beta-logo.png" />

    <script type="text/template" id="project-template">
      <div class="thumbnail">
        <img src="<%- project.thumbnail() %>">
      </div>
      <div class="name" title="<%- project.get('name') %>">
        <%- project.get("name") %>
      </div>
      <div class="category" title="<%- project.get('category') %>">
          <img class="icon" src="<%- project.categoryIcon() %>"
               title="<%- project.get('category') %>"/>
          <%- project.get("category") %>
      </div>
      <div class="department">
          <%- project.departmentName() %>
      </div>
      <div class="time-span"></div>
      <div class="status">
        <div class="<%- project.get('approved') ? 'approved' : 'pending' %>"/>
      </div
      <div class="budget-year">
        <% var years = project.yearRange();
           if (years[0] == years[1]) {
        %>
        <%= years[0] %>
        <% } else { %>
        <%= years[0] %>&ndash;<%= years[1] %>
        <% } %>
      </div>
      <div class="budget">
        <%- prettyAmount(project.totalBudget()) %>
      </div>
      <div class="description" >
          <%- project.get("description") %>
      </div>
    </script>

    <script type="text/template" id="proposal-preview-template">
      <div class="proposal-preview">
        <img src="<%- proposal.getThumb() %>" class="thumb"/>
        <h3 class="address"><%- proposal.get("address") %></h3>
        <div class="case-number"><%- proposal.get("caseNumber") %></div>
        <div class="applicant">
          <%
             var applicant = proposal.getAttributeValueOrFetch("applicant_name"),
             notice = proposal.getAttributeValue("legal_notice"),
             owner = proposal.getAttributeValue("owner_name");
             if (applicant) {
             %>
          <div class="applicant-name"><%- applicant %></div>
          <% }
             if (owner) {
             %>
          <div class="applicant-name"><%- owner %></div>
          <%
             }
             if (notice) {
             %>
          <div class="legal-notice"><%= gloss(abridge(notice)) %></div>
          <% } %>
        </div>
        <div id="details-minimap"></div>

        <div class="controls">
          <a class="more" href="#view=details">View more&hellip;</a>
          <a class="calendar" aria-label="View related event" href="#">
            <img src="/static/images/calendar.png">
          </a>
        </div>
      </div>
    </script>

    <script type="text/template" id="project-preview-template">
      <h3><%- project.get("name") %></h3>
      <div class="category"><%- project.get("category") %></div>
      <div class="department"><%- project.departmentName() %></div>
      <div class="desription">
        Making the City’s streets and sidewalks safe and accessible to everyone is a top priority. Given Somerville’s density, city streets and sidewalks are heavily utilized and thus require frequent maintenance.
      </div>

      <canvas class="budget-chart" height="200" width="300"></canvas>
      <div class="controls">
        <a class="more" href="#view=projectDetails">View More&hellip;</a>
      </div>
    </script>

    <script type="text/template" id="layer-item-template">
        <div class="flaticon-<%- layer.get('icon') %> layer-icon"/>
        <div class="label"><%- layer.get('short') %></div>
    </script>
  </head>

  <body>
    <div id="loading-indicator" class="control">
        <img src="/static/images/loading.gif">
    </div>
    <div id="map-container">
      <div id="map"></div>

      <!-- container for preview of selected proposal/project -->
      <div id="preview"></div>

      <!-- container for detail view -->
      <div id="overlay"></div>
    </div>

    <!-- This element prevents interactions with the map and other
         controls while the user is viewing, e.g., the intro screen. -->
    <div id="event-eater" class="_setview" data-goto="main"></div>

    <div id="search-banner" class="overlay">
        <a href="#view=about" id="logo" class="_setview"></a>
        <a href="#showmenu=1" id="hamburger"></a>
        <div class="overlay-contents">
            <h3>What&rsquo;s Being Built Near&hellip;</h3>
            <div class="input-group big-input">
                <form id="ref-address-form">
                    <input class="input"
                           type="text"
                           name="address"
                           placeholder="Enter address, landmark, intersection"
                           autocomplete="off" />
                    <img src="/static/images/geolocating.gif" class="status" alt="searching" />
                    <button type="submit" class="input-button go-button">go</button>
                    <a id="geolocate" href="#"
                       title="Search near me"
                       aria-label="Search near me">
                        <span>Current Location</span>
                    </a>
                    <a class="cancel"
                       href="#"
                       title="Cancel Search"
                       aria-label="Cancel search" >
                        &times;
                    </a>
                </form>
            </div>
        </div>

        <a id="explore" href="#view=main">Explore the Map</a>

        <div id="mode-controls">
            <a class="mode action list-mode-button" href="#view=list">
                <img src="static/images/list-icon.png" alt="List" width="23" height="23">
                <br/>
                LIST
            </a>
            <a class="mode action map-mode-button" href="#view=main">
                <img src="static/images/map-icon.png" alt="Map" width="23" height="23">
                <br/>
                MAP
            </a>
        </div>
        <div id="alert-container">
            <div id="alert">
                <a href="#" class="close" >&times;</a>
                <div>
                <h2 class="title"></h2>
                <span class="content"></span>
                </div>
            </div>
        </div>
    </div>


    <div id="intro" class="overlay">
      <div class="section">
        <div class="logos">
          <a href="https://github.com/cityofsomerville/cornerwise">
            <img src="/static/images/logo/github-light.png">
          </a>
          <a href="http://codeforboston.org" title="Code for Boston">
            <img src="/static/images/code_for_boston_logo.png" alt="Code for Boston" />
          </a>
        </div>
      </div>
    </div>

      <div id="map-options" class="control">
          <a href="#" class="toggle-layers" >
              <span class="expand-layers">Options</span>
              <span class="collapse-layers">&raquo;</span>
          </a>
          <div id="layers"></div>
      </div>

      <div id="map-controls" class="control">
          <a href="#" class="map-zoom-in" >&#43;</a>
          <a href="#" class="map-zoom-out" >&minus;</a>
      </div>

    <div id="info" class="overlay default">
      <div class="loading-message" >Loading...</div>
      <div class="when-empty">
          No proposals selected.
      </div>
      <div class="content"></div>
      <a href="#view=main" class="close">&times;</a>
    </div>

    <div id="modal" class="_setview" data-goto="main">
      <div id="modal-contents"></div>
    </div>

    <div id="list-view"></div>

    <div id="image-view"></div>

    <div id="side-menu" class="collapsed">
        <a href="#showmenu=0" class="close">&times;</a>

        <div class="menu-group" >
            <div class="group-header" >
                Filter Results
            </div>

            <select name="" class="filter-selector">
                <option value="">Application Status</option>
            </select>

            <select name="" class="filter-selector">
                <option>Property Type</option>
            </select>

            <select name="" class="filter-selector">
                <option>Lot Size</option>
            </select>
        </div>

        <hr class="group-separator" />

        <div class="menu-group" >
            <div class="group-header" >
                View by
            </div>

            <a class="mode action list-mode-button" href="#view=list&showmenu=0" >
                <img src="static/images/list-icon.png" alt="List" width="23" height="23">
                <br/>
                LIST
            </a>

            <a class="mode action map-mode-button" href="#view=main&showmenu=0">
                <img src="static/images/map-icon.png" alt="Map" width="23" height="23">
                <br/>
                MAP
            </a>
        </div>

        <hr class="group-separator" />

        <div class="menu-group" >
            <div class="group-header" >
                Show on Map
            </div>
            <div class="group-contents">

            </div>
        </div>

        <hr class="group-separator" />

        <div class="menu-group" >
            <div class="group-contents">
                <a href="#view=about&showmenu=0" class="_setview">About Cornerwise</a>
                <br/>
                <a href="#" >Contact</a>
            </div>
        </div>
    </div>

    <div id="subscribe">
        <a href="#" class="screen screen1 subscribe-link">
            Subscribe to Project Updates
        </a>
        <div class="screen screen2">
            <div class="signup-screen" >
                <a href="#" class="cancel">&times;</a>
                <form class="form">
                    <span>&nbsp;Email address</span>
                    <div class="input-group">
                        <input name="email"
                               class="input"
                               type="email"/>
                        <button type="submit">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://use.typekit.net/wpe7mmw.js"></script>
    <script type="text/javascript">
     try{Typekit.load({ async: true });}catch(e){}
    </script>
  </body>
</html>
